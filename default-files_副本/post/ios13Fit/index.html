<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>iOS13éƒ¨åˆ†é€‚é… | å°ä¹çš„é…’çª</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://hudaqian.github.io/favicon.ico?v=1606553410345">
<link rel="stylesheet" href="https://hudaqian.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="ç§æœ‰KVC
[self setValue:baseTabBar forKey:@&quot;tabBar&quot;]; //æ­£å¸¸
[_textField setValue:[UIColor redColor] forKeyPath:@&q..." />
    <meta name="keywords" content="iOS,iOS" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://hudaqian.github.io">
        <img src="https://hudaqian.github.io/images/avatar.png?v=1606553410345" class="site-logo">
        <h1 class="site-title">å°ä¹çš„é…’çª</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="https://hudaqian.github.io/post/aboutme" class="site-nav">
            å…³äº
          </a>
        
      
        
          <a href="https://github.com/HuDaQian" class="site-nav" target="_blank">
            Github
          </a>
        
      
        
          <a href="https://hudaqian.github.io/GameLibrary/My2048/index.html" class="site-nav" target="_blank">
            2048
          </a>
        
      
        
          <a href="https://hudaqian.github.io/GameLibrary/CatGame/index.html" class="site-nav" target="_blank">
            CatchCat
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      <h3>æœ€é¦™ä¸è¿‡è·åŒ…è›‹<br>æœ€ç¾ä¸è¿‡å¤œå½’äºº<h3>
    </div>
    <div class="site-footer">
      <h3>Miloyâ¤ï¸Grace</h3> | <a class="rss" href="https://hudaqian.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">iOS13éƒ¨åˆ†é€‚é…</h2>
            <div class="post-date">2019-09-09</div>
            
            <div class="post-content" v-pre>
              <h1 id="ç§æœ‰kvc"><code>ç§æœ‰KVC</code></h1>
<pre><code>[self setValue:baseTabBar forKey:@&quot;tabBar&quot;]; //æ­£å¸¸
[_textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];///å´©æºƒ
[_textField setValue:[UIFont systemFontOfSize:14] forKeyPath:@&quot;_placeholderLabel.font&quot;];///å´©æºƒ

_textField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:@&quot;å§“å&quot; attributes:@{NSFontAttributeName:[UIFont systemFontOfSize:14],NSForegroundColorAttributeName:[UIColor redColor]}]; ///æ–°çš„å®ç°
</code></pre>
<p>åœ¨Xcode10ä¸Šç¼–è¯‘ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨Xcode11ä¸Šç¼–è¯‘çš„ä¼šå´©æºƒã€‚å¹¶ä¸”- (void)setValue:(nullable id)value<br>
forKey:(NSString *)keyæ–¹æ³•æ²¡é—®é¢˜ï¼Œ- (void)setValue:(nullable id)value<br>
forKeyPath:(NSString *)keyPathä¼šå´©æºƒ</p>
<h1 id="presentviewcontrollerçš„é—®é¢˜"><code>presentViewControllerçš„é—®é¢˜</code></h1>
<p>ä¼šå‡ºç°è¿™ç§æƒ…å†µæ˜¯ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰å¯¹UIViewControlleré‡Œé¢çš„ä¸€ä¸ªå±æ€§ï¼Œå³modalPresentationStyleï¼ˆè¯¥å±æ€§æ˜¯æ§åˆ¶å™¨åœ¨æ¨¡æ€è§†å›¾æ—¶å°†è¦ä½¿ç”¨çš„æ ·å¼ï¼‰æ²¡æœ‰è®¾ç½®éœ€è¦çš„ç±»å‹ã€‚åœ¨iOS13ä¸­modalPresentationStyleçš„é»˜è®¤æ”¹ä¸ºUIModalPresentationAutomatic,è€Œåœ¨ä¹‹å‰é»˜è®¤æ˜¯UIModalPresentationFullScreenã€‚<br>
è¿™ä¸ªä¸å—Xcodeç‰ˆæœ¬çš„å½±å“ï¼Œåªè¦æ˜¯iOS13çš„ç³»ç»Ÿï¼Œæ²¡æœ‰æ˜¾å¼è®¾ç½®modalPresentationStyleï¼Œå°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜</p>
<h1 id="å³å°†åºŸå¼ƒçš„-launchimage"><code>å³å°†åºŸå¼ƒçš„ LaunchImage</code></h1>
<p>ä» iOS 8 çš„æ—¶å€™ï¼Œè‹¹æœå°±å¼•å…¥äº† LaunchScreenï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®<br>
LaunchScreenæ¥ä½œä¸ºå¯åŠ¨é¡µã€‚å½“ç„¶ï¼Œç°åœ¨ä½ è¿˜å¯ä»¥ä½¿ç”¨LaunchImageæ¥è®¾ç½®å¯åŠ¨å›¾ã€‚ä¸è¿‡ä½¿ç”¨LaunchImageçš„è¯ï¼Œè¦æ±‚æˆ‘ä»¬å¿…é¡»æä¾›å„ç§å±å¹•å°ºå¯¸çš„å¯åŠ¨å›¾ï¼Œæ¥é€‚é…å„ç§è®¾å¤‡ï¼Œéšç€è‹¹æœè®¾å¤‡å°ºå¯¸è¶Šæ¥è¶Šå¤šï¼Œè¿™ç§æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿ<br>
Flexibleã€‚è€Œä½¿ç”¨ LaunchScreençš„è¯ï¼Œæƒ…å†µä¼šå˜çš„å¾ˆç®€å•ï¼Œ<br>
LaunchScreenæ˜¯æ”¯æŒAutoLayout+SizeClassçš„ï¼Œæ‰€ä»¥é€‚é…å„ç§å±å¹•éƒ½ä¸åœ¨è¯ä¸‹ã€‚ æ³¨æ„å•¦âš ï¸ï¼Œä»2020å¹´4æœˆå¼€å§‹ï¼Œæ‰€æœ‰ä½¿â½¤<br>
iOS13 SDK çš„ App å°†å¿…é¡»æä¾› LaunchScreenï¼ŒLaunchImageå³å°†é€€å‡ºå†å²èˆå°</p>
<h1 id="æš—é»‘æ¨¡å¼"><code>æš—é»‘æ¨¡å¼</code></h1>
<blockquote>
<p>åŸç†</p>
</blockquote>
<ul>
<li>1.å°†åŒä¸€ä¸ªèµ„æºï¼Œåˆ›å»ºå‡ºä¸¤ç§æ¨¡å¼çš„æ ·å¼ã€‚ç³»ç»Ÿæ ¹æ®å½“å‰é€‰æ‹©çš„æ ·å¼ï¼Œè‡ªåŠ¨è·å–è¯¥æ ·å¼çš„èµ„æº</li>
<li>2.æ¯æ¬¡ç³»ç»Ÿæ›´æ–°æ ·å¼æ—¶ï¼Œåº”ç”¨ä¼šè°ƒç”¨å½“å‰æ‰€æœ‰å­˜åœ¨çš„å…ƒç´ è°ƒç”¨å¯¹åº”çš„ä¸€äº›é‡æ–°æ–¹æ³•ï¼Œè¿›è¡Œé‡ç»˜è§†å›¾ï¼Œå¯ä»¥åœ¨å¯¹åº”çš„æ–¹æ³•åšç›¸åº”çš„æ”¹åŠ¨</li>
</ul>
<blockquote>
<p>èµ„æºæ–‡ä»¶é€‚é…</p>
</blockquote>
<ol>
<li>åˆ›å»ºä¸€ä¸ªAssetsæ–‡ä»¶ï¼ˆæˆ–åœ¨ç°æœ‰çš„Assetsæ–‡ä»¶ä¸­ï¼‰</li>
<li>æ–°å»ºä¸€ä¸ªå›¾ç‰‡èµ„æºæ–‡ä»¶ï¼ˆæˆ–è€…é¢œè‰²èµ„æºæ–‡ä»¶ã€æˆ–è€…å…¶ä»–èµ„æºæ–‡ä»¶ï¼‰</li>
<li>é€‰ä¸­è¯¥èµ„æºæ–‡ä»¶ï¼Œ æ‰“å¼€ Xcode -&gt;View -&gt;Inspectors -&gt;Show Attributes Inspectors ï¼ˆæˆ–è€…Option+Command+4ï¼‰è§†å›¾ï¼Œå°†Apperances é€‰é¡¹ æ”¹ä¸ºAnyï¼ŒDark</li>
<li>æ‰§è¡Œå®Œç¬¬ä¸‰æ­¥ï¼Œèµ„æºæ–‡ä»¶å°†ä¼šæœ‰å¤šä¸ªå®¹å™¨æ¡†ï¼Œåˆ†åˆ«ä¸º Any Apperance å’Œ Dark Apperance. Any Apperance åº”ç”¨äºé»˜è®¤æƒ…å†µï¼ˆUnspecifiedï¼‰ä¸é«˜äº®æƒ…å†µï¼ˆLightï¼‰ï¼Œ Dark Apperance åº”ç”¨äºæš—é»‘æ¨¡å¼ï¼ˆDarkï¼‰</li>
<li>ä»£ç é»˜è®¤æ‰§è¡Œæ—¶ï¼Œå°±å¯ä»¥æ­£å¸¸é€šè¿‡åå­—ä½¿ç”¨äº†ï¼Œç³»ç»Ÿä¼šæ ¹æ®å½“å‰æ¨¡å¼è‡ªåŠ¨è·å–å¯¹åº”çš„èµ„æºæ–‡ä»¶</li>
</ol>
<blockquote>
<p>æ³¨æ„</p>
</blockquote>
<p>åŒä¸€å·¥ç¨‹å†…å¤šä¸ªAssetsæ–‡ä»¶åœ¨æ‰“åŒ…åï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªAssets.car æ–‡ä»¶ï¼Œæ‰€ä»¥è¦ä¿è¯Assetså†…èµ„æºæ–‡ä»¶çš„åå­—ä¸èƒ½ç›¸åŒ</p>
<p>UIView</p>
<blockquote>
<p>traitCollectionDidChange( _ğŸ˜ƒ<br>
layoutSubviews()<br>
draw(_ğŸ˜ƒ<br>
updateConstraints()<br>
tintColorDidChange()</p>
</blockquote>
<p>UIViewController</p>
<blockquote>
<p>traitCollectionDidChange(_ğŸ˜ƒ<br>
updateViewConstraints()<br>
viewWillLayoutSubviews()<br>
viewDidLayoutSubviews()</p>
</blockquote>
<p>UIPresentationController</p>
<blockquote>
<p>traitCollectionDidChange(_ğŸ˜ƒ<br>
containerViewWillLayoutSubviews()<br>
containerViewDidLayoutSubviews()</p>
</blockquote>
<blockquote>
<p>å…¨å±€å…³é—­é»‘æš—æ¨¡å¼</p>
</blockquote>
<ul>
<li>æ–¹å¼ä¸€ é…ç½®plistæ–‡ä»¶ï¼š åœ¨Info.plist æ–‡ä»¶ä¸­ï¼Œæ·»åŠ UIUserInterfaceStyle key åå­—ä¸º User Interface Style å€¼ä¸ºStringï¼Œå°†UIUserInterfaceStyle key çš„å€¼è®¾ç½®ä¸º Light</li>
</ul>
<p>åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœç”¨çš„ç³»ç»Ÿæ§ä»¶ï¼ˆå¦‚cellã€tableviewçš„èƒŒæ™¯è‰²ï¼‰æœªè®¾ç½®èƒŒæ™¯è‰²ï¼ˆæˆ–è€…ä¸ºé€æ˜ï¼‰ï¼Œåˆ™è¿›å…¥æš—é»‘æ¨¡å¼åï¼Œæ§ä»¶èƒŒæ™¯è‰²å˜ä¸ºé»‘è‰²ã€‚å¯ä»¥æ¯ä¸€ä¸ªé¡µé¢è®¾ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ•´ä½“è®¾ç½®ï¼Œä¸€èˆ¬æˆ‘ä»¬çš„APPéƒ½æ˜¯åœ¨ä¸€ä¸ªwindowä¸‹çš„ï¼Œé‚£å°±æ•´ä½“è®¾ç½®APPé‡Œçš„window</p>
<ul>
<li>
<p>æ–¹å¼äºŒ ï¼šä»£ç å…³é—­é»‘æš—æ¨¡å¼ å¼ºåˆ¶å…³é—­æš—é»‘æ¨¡å¼</p>
<p>#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0<br>
if(@available(iOS 13.0,*)){<br>
self.window.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;<br>
}<br>
#endif</p>
</li>
</ul>
<p>å•ä¸ªç•Œé¢ä¸éµå¾ªæš—é»‘æ¨¡å¼</p>
<ol>
<li>
<p>UIViewControllerä¸UIView éƒ½æ–°å¢ä¸€ä¸ªå±æ€§ overrideUserInterfaceStyle</p>
</li>
<li>
<p>å°† overrideUserInterfaceStyle è®¾ç½®ä¸ºå¯¹åº”çš„æ¨¡å¼ï¼Œåˆ™å¼ºåˆ¶é™åˆ¶è¯¥å…ƒç´ ä¸å…¶å­å…ƒç´ ä»¥è®¾ç½®çš„æ¨¡å¼è¿›è¡Œå±•ç¤ºï¼Œä¸è·Ÿéšç³»ç»Ÿæ¨¡å¼æ”¹å˜è¿›è¡Œæ”¹å˜</p>
<pre><code>1. è®¾ç½® ViewController çš„è¯¥å±æ€§ï¼Œ å°†ä¼šå½±å“è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾å’Œå­è§†å›¾æ§åˆ¶å™¨é‡‡ç”¨è¯¥æ ·å¼
</code></pre>
<ol start="2">
<li>è®¾ç½® View çš„è¯¥å±æ€§ï¼Œ å°†ä¼šå½±å“è§†å›¾åŠå…¶æ‰€æœ‰å­è§†å›¾é‡‡ç”¨è¯¥æ ·å¼</li>
<li>è®¾ç½® Window çš„è¯¥å±æ€§ï¼Œ å°†ä¼šå½±å“çª—å£ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½é‡‡ç”¨æ ·å¼ï¼ŒåŒ…æ‹¬æ ¹è§†å›¾æ§åˆ¶å™¨å’Œåœ¨è¯¥çª—å£ä¸­æ˜¾ç¤ºå†…å®¹çš„æ‰€æœ‰æ¼”ç¤ºæ§åˆ¶å™¨ï¼ˆUIPresentationControllerï¼‰</li>
</ol>
</li>
</ol>
<h1 id="å¢åŠ ä¸€ç›´ä½¿ç”¨è“ç‰™çš„æƒé™ç”³è¯·"><code>å¢åŠ ä¸€ç›´ä½¿ç”¨è“ç‰™çš„æƒé™ç”³è¯·</code></h1>
<p>CBCentralManagerï¼ŒiOS13ä»¥å‰ï¼Œä½¿ç”¨è“ç‰™æ—¶å¯ä»¥ç›´æ¥ç”¨ï¼Œä¸ä¼šå‡ºç°æƒé™æç¤ºï¼ŒiOS13åï¼Œå†ä½¿ç”¨å°±ä¼šæç¤ºäº†ã€‚<br>
åœ¨info.plisté‡Œå¢åŠ </p>
<pre><code>&lt;key&gt;NSBluetoothAlwaysUsageDescription&lt;/key&gt; 
&lt;string&gt;æˆ‘ä»¬è¦ä¸€ç›´ä½¿ç”¨æ‚¨çš„è“ç‰™ï¼Œå…·ä½“åšä»€ä¹ˆåˆ«é—®æˆ‘&lt;/string&gt;`
</code></pre>
<h1 id="ä½¿ç”¨mjextension-ä¸­å¤„ç†nsnullçš„ä¸åŒ"><code>ä½¿ç”¨MJExtension ä¸­å¤„ç†NSNullçš„ä¸åŒ</code></h1>
<p>è¿™ä¸ªç›´æ¥ä¼šå¯¼è‡´Crashçš„åœ¨å°†æœåŠ¡ç«¯æ•°æ®å­—å…¸è½¬æ¢ä¸ºæ¨¡å‹æ—¶ï¼Œå¦‚æœé‡åˆ°æœåŠ¡ç«¯ç»™çš„æ•°æ®ä¸ºNSNullæ—¶ï¼Œ<br>
mj_JSONObjectï¼Œå…¶ä¸­<br>
class_copyPropertyListæ–¹æ³•å¾—åˆ°çš„å±æ€§é‡Œï¼Œå¤šäº†ä¸€ç§EFSQLBindingç±»å‹çš„ä¸œè¥¿ï¼Œè€Œä¸”å±æ€§æ•°é‡ä¹Ÿä¸å‡†ç¡®ï¼Œ<br>
é‚£å°±æ²¡åŠæ³•äº†ï¼Œåªèƒ½æ”¹å†™è¿™ä¸ªæ–¹æ³•äº†ï¼Œè¿™ä¸ªç»„ä»¶æ²¡æœ‰æ›´æ–°çš„æƒ…å†µä¸‹ï¼Œå†™äº†ä¸€ä¸ªæ–¹æ³•swizzlingæ‰æŠŠå½“é‡åˆ° NSNullæ—¶ï¼Œç›´æ¥è½¬ä¸ºniläº†ã€‚</p>
<h1 id="wkwebview-ä¸­æµ‹é‡é¡µé¢å†…å®¹é«˜åº¦çš„æ–¹å¼å˜æ›´"><code>WKWebView ä¸­æµ‹é‡é¡µé¢å†…å®¹é«˜åº¦çš„æ–¹å¼å˜æ›´</code></h1>
<p>iOS 13ä»¥å‰<br>
document.body.scrollHeight<br>
iOS 13ä¸­<br>
document.documentElement.scrollHeight<br>
ä¸¤è€…ç›¸å·®55 åº”è¯¥æ˜¯æµè§ˆå™¨å®šä¹‰é«˜åº¦å˜äº†</p>
<h1 id="å‹ç›Ÿæ¶ˆæ¯æ¨é€è·å–devicetokené€‚é…"><code>å‹ç›Ÿæ¶ˆæ¯æ¨é€ï¼Œè·å–deviceTokené€‚é…</code></h1>
<pre><code>- (void)application:(UIApplication *)application
didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
   if (![deviceToken isKindOfClass:[NSData class]]) return;
      const unsigned *tokenBytes = (const unsigned *)[deviceToken bytes];
      NSString *hexToken = [NSString stringWithFormat:@&quot;%08x%08x%08x%08x%08x%08x%08x%08x&quot;,ntohl(tokenBytes[0]), ntohl(tokenBytes[1]), ntohl(tokenBytes[2]),ntohl(tokenBytes[3]), ntohl(tokenBytes[4]), ntohl(tokenBytes[5]),ntohl(tokenBytes[6]),ntohl(tokenBytes[7])];
      pushDeviceToken = hexToken;
      NSLog(@&quot;deviceToken:%@&quot;,hexToken);
}
</code></pre>
<h1 id="statusbar-ä¸ä¹‹å‰ç‰ˆæœ¬ä¸åŒ"><code>StatusBar ä¸ä¹‹å‰ç‰ˆæœ¬ä¸åŒ</code></h1>
<p>ç›®å‰çŠ¶æ€æ ä¹Ÿå¢åŠ äº†ä¸€ç§æ¨¡å¼ï¼Œç”±ä¹‹å‰çš„ä¸¤ç§ï¼Œå˜æˆäº†ä¸‰ç§,<br>
å…¶ä¸­defaultç”±ä¹‹å‰çš„é»‘è‰²å†…å®¹ï¼Œå˜æˆäº†ä¼šæ ¹æ®ç³»ç»Ÿæ¨¡å¼ï¼Œè‡ªåŠ¨é€‰æ‹©å½“å‰å±•ç¤ºlightContentè¿˜æ˜¯darkContent</p>
<p><a href="https://hudaqian.github.io/tag/iOS"> iOS </a></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://hudaqian.github.io/tag/iOS/" class="tag">
                    iOS
                  </a>
                
                  <a href="https://hudaqian.github.io/tag/iOS/" class="tag">
                    iOS
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://hudaqian.github.io/post/Primary_Mid_17/">
                  <h3 class="post-title">
                    æ‹†è¯»ã€Šå°ç‹—é’±é’±ã€‹
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>





  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '70e70574c307d3e0aab1',
        clientSecret: 'f4cac46a3ae606b5b74da444d7e6afbfbdea51d0',
        repo: 'hudaqian.github.io',
        owner: 'HuDaQian',
        admin: ['HuDaQian'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
